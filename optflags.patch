--- john-1.7.9/src/Makefile.orig	2011-11-23 01:19:21.000000000 +0100
+++ john-1.7.9/src/Makefile	2011-11-27 11:01:56.437966014 +0100
@@ -20,7 +20,7 @@
 #OMPFLAGS = -fopenmp -msse2
 # Sun Studio with OpenMP (set the OMP_NUM_THREADS env var at runtime)
 #OMPFLAGS = -xopenmp
-CFLAGS = -c -Wall -O2 -fomit-frame-pointer $(OMPFLAGS)
+CFLAGS = -c $(OPTFLAGS) -fomit-frame-pointer $(OMPFLAGS)
 # CFLAGS for use on the main john.c file only
 CFLAGS_MAIN = $(CFLAGS)
 ASFLAGS = -c $(OMPFLAGS)
@@ -28,6 +28,7 @@
 OPT_NORMAL = -funroll-loops
 # Remove the "-Os" if you're using an ancient version of gcc
 OPT_INLINE = -Os -funroll-loops -finline-functions
+OPTFLAGS = -Wall -O2
 
 JOHN_OBJS = \
 	DES_fmt.o DES_std.o DES_bs.o DES_bs_b.o \
